/*
 * Scrollface - A basic jQuery slideshow
 
 * Copyright (c) 2011 Kyle Truscott
 *
 * http://keighl.github.com/scrollface
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function(a){"use strict";var b={init:function(c){return a(this).each(function(){var d={pager:null,anchor_builder:null,next:null,prev:null,active_pager_class:"active",speed:300,easing:"linear",auto:!0,interval:2e3};c&&a.extend(d,c),d.slides=a(this).children(),d.count=d.slides.size(),d.height=a(this).height(),d.width=a(this).width(),d.index=0,d.is_moving=!1,d.timer=null;var e=a(this),f=a(this).data("scrollface"),g=d;f||(a(this).css({position:"relative "}),a(g.slides).each(function(c,d){a(d).css({position:"absolute",left:c===0?0:g.width*100,top:0,display:c===0?"block":"none"});var f=null;a(g.pager).size()&&(a.isFunction(g.anchor_builder)&&(f=g.anchor_builder.call(g.pager,c,d),f&&c===0&&a(f).addClass(g.active_pager_class)),f||(f=a("<a />",{"class":c===0?g.active_pager_class:null,text:c}).appendTo(a(g.pager))),f&&a(f).bind("click.scrollface",function(){b.interrupt_timer.call(e),b.step_to.call(e,c);return!1}))}),a(g.next).size()&&a(g.next).bind("click.scrollface",function(a){b.interrupt_timer.call(e),b.next.call(e)}),a(g.prev).size()&&a(g.prev).bind("click.scrollface",function(a){b.interrupt_timer.call(e),b.prev.call(e)}),a(this).data("scrollface",{scrollface:g}),g.auto&&b.start_timer.call(e))})},destroy:function(){return a(this).each(function(){a(this).data("scrollface",null)})},step_to:function(b,c){return a(this).each(function(){var d=a(this).data("scrollface").scrollface;if(!d.is_moving&&b!==d.index){d.is_moving=!0,a(d.pager).size()&&(a("a",d.pager).removeClass(d.active_pager_class),a("a",d.pager).eq(b).addClass(d.active_pager_class));var e=b>d.index?"left":"right";e=c||e;var f=parseInt(a(this).css("left"),10)||0,g=a(d.slides[d.index]),h=parseInt(a(g).css("left"),10)||0,i=e==="left"?h+d.width:h-d.width,j=a(d.slides[b]).css({left:i}).show(),k=e==="left"?f-d.width:f+d.width;a(this).stop().animate({left:k},d.speed,d.easing,function(){a(g).hide(),d.index=b,d.is_moving=!1})}})},next:function(){return a(this).each(function(){var c=a(this).data("scrollface").scrollface,d=c.index===c.count-1?0:c.index+1,e=c.index===c.count-1?"left":!1;b.step_to.call(this,d,e)})},prev:function(){return a(this).each(function(){var c=a(this).data("scrollface").scrollface,d=c.index===0?c.count-1:c.index-1,e=c.index===0?"right":!1;b.step_to.call(this,d,e)})},start_timer:function(){return a(this).each(function(){var c=a(this).data("scrollface").scrollface,d=this;c.timer=setInterval(function(){b.next.call(d)},c.interval)})},kill_timer:function(){return a(this).each(function(){var b=a(this).data("scrollface").scrollface;b.timer&&clearInterval(b.timer)})},interrupt_timer:function(){return a(this).each(function(){var c=a(this).data("scrollface").scrollface;c.timer&&(b.kill_timer.call(this),b.start_timer.call(this))})}};a.fn.scrollface=function(c){if(b[c])return b[c].apply(this,Array.prototype.slice.call(arguments,1));if(typeof c=="object"||!c)return b.init.apply(this,arguments);a.error("Method "+c+" does not exist on jQuery.scrollface!")}})(jQuery)